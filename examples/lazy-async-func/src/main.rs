use lazy_attribute::lazy_ref;

//--------------------------------------------------------------------------------------------------
// Main
//--------------------------------------------------------------------------------------------------

#[tokio::main]
async fn main() {
    println!("{:#?}", get_foo().await);
    println!("{:#?}", get_foo().await);
}

//--------------------------------------------------------------------------------------------------
// Types
//--------------------------------------------------------------------------------------------------

#[derive(Debug)]
struct Foo();

//--------------------------------------------------------------------------------------------------
// Functions
//--------------------------------------------------------------------------------------------------

#[lazy_ref]
async fn get_foo() -> Foo {
    println!("get_foo called once!");
    Foo()
}
